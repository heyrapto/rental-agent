{"address":"::","code":"EADDRINUSE","errno":-48,"level":"error","message":"Server error: listen EADDRINUSE: address already in use :::3000","port":3000,"service":"rental-contract-ao-agent","stack":"Error: listen EADDRINUSE: address already in use :::3000\n    at Server.setupListenHandle [as _listen2] (node:net:1937:16)\n    at listenInCluster (node:net:1994:12)\n    at Server.listen (node:net:2099:7)\n    at Function.listen (/Users/macowner/Desktop/rental-agent/agent/node_modules/express/lib/application.js:635:24)\n    at RentalContractAOAgent.start (/Users/macowner/Desktop/rental-agent/agent/src/index.js:170:36)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","syscall":"listen","timestamp":"2025-08-20T21:49:44.852Z","version":"1.0.0"}
{"level":"error","message":"Forced shutdown after timeout","service":"rental-contract-ao-agent","timestamp":"2025-08-20T21:57:53.502Z","version":"1.0.0"}
{"body":{"action":"recordPayment","foo":"abc123"},"error":"walletAddress is not defined","headers":{"accept":"*/*","accept-encoding":"gzip, deflate, br","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY3ZWZlNTAxOGU3NGJhYTJlN2U5MTRlZCIsInJvbGUiOiJhZG1pbiIsImlhdCI6MTc0Mzg3MjgyMCwiZXhwIjoxNzQzODc2NDIwfQ.1LnjG3ec3O_7fI35xpHXLV_HxMUpCPL58fU0PP-Xtz8","cache-control":"no-cache","connection":"keep-alive","content-length":"52","content-type":"application/json","host":"localhost:6000","user-agent":"EchoapiRuntime/1.1.0","x-sender-wallet":"omsGXfLHi0AeE144E0uQXaNxsRoaftzPjq2TxaZyDLg","x-sig":"810dcb1eb0a008832e470d3d357fea12940e682851f4865b4c61647aff37d583","x-timestamp":"2025-08-23T14:22:28Z"},"ip":"::1","level":"error","message":"Error occurred","method":"POST","service":"rental-contract-ao-agent","stack":"ReferenceError: walletAddress is not defined\n    at signatureValidator (/Users/macowner/Desktop/rental-agent/agent/src/middleware/signatureValidator.js:105:56)\n    at Layer.handle [as handle_request] (/Users/macowner/Desktop/rental-agent/agent/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/macowner/Desktop/rental-agent/agent/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/macowner/Desktop/rental-agent/agent/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/macowner/Desktop/rental-agent/agent/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/macowner/Desktop/rental-agent/agent/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/macowner/Desktop/rental-agent/agent/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/macowner/Desktop/rental-agent/agent/node_modules/express/lib/router/index.js:280:10)\n    at urlencodedParser (/Users/macowner/Desktop/rental-agent/agent/node_modules/body-parser/lib/types/urlencoded.js:85:7)\n    at Layer.handle [as handle_request] (/Users/macowner/Desktop/rental-agent/agent/node_modules/express/lib/router/layer.js:95:5)","timestamp":"2025-08-23T14:29:55.785Z","url":"/agent","userAgent":"EchoapiRuntime/1.1.0","version":"1.0.0"}
{"body":{"action":"recordPayment","foo":"abc123"},"error":"walletAddress is not defined","headers":{"accept":"*/*","accept-encoding":"gzip, deflate, br","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY3ZWZlNTAxOGU3NGJhYTJlN2U5MTRlZCIsInJvbGUiOiJhZG1pbiIsImlhdCI6MTc0Mzg3MjgyMCwiZXhwIjoxNzQzODc2NDIwfQ.1LnjG3ec3O_7fI35xpHXLV_HxMUpCPL58fU0PP-Xtz8","cache-control":"no-cache","connection":"keep-alive","content-length":"52","content-type":"application/json","host":"localhost:6000","user-agent":"EchoapiRuntime/1.1.0","x-sender-wallet":"omsGXfLHi0AeE144E0uQXaNxsRoaftzPjq2TxaZyDLg","x-sig":"810dcb1eb0a008832e470d3d357fea12940e682851f4865b4c61647aff37d583","x-timestamp":"2025-08-23T14:22:28Z"},"ip":"::1","level":"error","message":"Error occurred","method":"POST","service":"rental-contract-ao-agent","stack":"ReferenceError: walletAddress is not defined\n    at signatureValidator (/Users/macowner/Desktop/rental-agent/agent/src/middleware/signatureValidator.js:104:56)\n    at Layer.handle [as handle_request] (/Users/macowner/Desktop/rental-agent/agent/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/macowner/Desktop/rental-agent/agent/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/macowner/Desktop/rental-agent/agent/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/macowner/Desktop/rental-agent/agent/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/macowner/Desktop/rental-agent/agent/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/macowner/Desktop/rental-agent/agent/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/macowner/Desktop/rental-agent/agent/node_modules/express/lib/router/index.js:280:10)\n    at urlencodedParser (/Users/macowner/Desktop/rental-agent/agent/node_modules/body-parser/lib/types/urlencoded.js:85:7)\n    at Layer.handle [as handle_request] (/Users/macowner/Desktop/rental-agent/agent/node_modules/express/lib/router/layer.js:95:5)","timestamp":"2025-08-23T14:31:07.981Z","url":"/agent","userAgent":"EchoapiRuntime/1.1.0","version":"1.0.0"}
{"action":"recordPayment","duration":69,"error":"Validation failed","level":"error","message":"Action recordPayment failed","service":"rental-contract-ao-agent","timestamp":"2025-08-23T14:37:25.906Z","version":"1.0.0","walletAddress":"omsGXfLHi0AeE144E0uQXaNxsRoaftzPjq2TxaZyDLg"}
{"body":{"action":"recordPayment","foo":"abc123"},"error":"Validation failed","headers":{"accept":"*/*","accept-encoding":"gzip, deflate, br","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY3ZWZlNTAxOGU3NGJhYTJlN2U5MTRlZCIsInJvbGUiOiJhZG1pbiIsImlhdCI6MTc0Mzg3MjgyMCwiZXhwIjoxNzQzODc2NDIwfQ.1LnjG3ec3O_7fI35xpHXLV_HxMUpCPL58fU0PP-Xtz8","cache-control":"no-cache","connection":"keep-alive","content-length":"52","content-type":"application/json","host":"localhost:6000","user-agent":"EchoapiRuntime/1.1.0","x-sender-wallet":"omsGXfLHi0AeE144E0uQXaNxsRoaftzPjq2TxaZyDLg","x-sig":"16cd532fcb12fe8732ffdf4861c5ef3111fc791e97f502607fec76637870fe96","x-timestamp":"2025-08-23T14:22:28Z"},"ip":"::1","level":"error","message":"Error occurred","method":"POST","service":"rental-contract-ao-agent","stack":"ValidationError: Validation failed\n    at handleJoiValidationError (/Users/macowner/Desktop/rental-agent/agent/src/middleware/errorHandler.js:197:15)\n    at handleRecordPayment (/Users/macowner/Desktop/rental-agent/agent/src/handlers/messageHandler.js:187:15)\n    at /Users/macowner/Desktop/rental-agent/agent/src/handlers/messageHandler.js:50:32\n    at /Users/macowner/Desktop/rental-agent/agent/src/middleware/errorHandler.js:182:25\n    at Layer.handle [as handle_request] (/Users/macowner/Desktop/rental-agent/agent/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/macowner/Desktop/rental-agent/agent/node_modules/express/lib/router/route.js:149:13)\n    at signatureValidator (/Users/macowner/Desktop/rental-agent/agent/src/middleware/signatureValidator.js:96:9)\n    at Layer.handle [as handle_request] (/Users/macowner/Desktop/rental-agent/agent/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/macowner/Desktop/rental-agent/agent/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/macowner/Desktop/rental-agent/agent/node_modules/express/lib/router/route.js:119:3)","timestamp":"2025-08-23T14:37:25.933Z","url":"/agent","userAgent":"EchoapiRuntime/1.1.0","userId":"omsGXfLHi0AeE144E0uQXaNxsRoaftzPjq2TxaZyDLg","version":"1.0.0"}
{"action":"recordPayment","duration":3,"error":"Validation failed","level":"error","message":"Action recordPayment failed","service":"rental-contract-ao-agent","timestamp":"2025-08-23T14:38:32.457Z","version":"1.0.0","walletAddress":"omsGXfLHi0AeE144E0uQXaNxsRoaftzPjq2TxaZyDLg"}
{"body":{"action":"recordPayment","amount":1200,"leaseId":"abc123","txHash":"0x123abc"},"error":"Validation failed","headers":{"accept":"*/*","accept-encoding":"gzip, deflate, br","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY3ZWZlNTAxOGU3NGJhYTJlN2U5MTRlZCIsInJvbGUiOiJhZG1pbiIsImlhdCI6MTc0Mzg3MjgyMCwiZXhwIjoxNzQzODc2NDIwfQ.1LnjG3ec3O_7fI35xpHXLV_HxMUpCPL58fU0PP-Xtz8","cache-control":"no-cache","connection":"keep-alive","content-length":"98","content-type":"application/json","host":"localhost:6000","user-agent":"EchoapiRuntime/1.1.0","x-sender-wallet":"omsGXfLHi0AeE144E0uQXaNxsRoaftzPjq2TxaZyDLg","x-sig":"7d9214dad8b92f26023f51c1ec44ae7a5ca903a8f736b0b8786a578dfa81a588","x-timestamp":"2025-08-23T14:22:28Z"},"ip":"::1","level":"error","message":"Error occurred","method":"POST","service":"rental-contract-ao-agent","stack":"ValidationError: Validation failed\n    at handleJoiValidationError (/Users/macowner/Desktop/rental-agent/agent/src/middleware/errorHandler.js:197:15)\n    at handleRecordPayment (/Users/macowner/Desktop/rental-agent/agent/src/handlers/messageHandler.js:187:15)\n    at /Users/macowner/Desktop/rental-agent/agent/src/handlers/messageHandler.js:50:32\n    at /Users/macowner/Desktop/rental-agent/agent/src/middleware/errorHandler.js:182:25\n    at Layer.handle [as handle_request] (/Users/macowner/Desktop/rental-agent/agent/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/macowner/Desktop/rental-agent/agent/node_modules/express/lib/router/route.js:149:13)\n    at signatureValidator (/Users/macowner/Desktop/rental-agent/agent/src/middleware/signatureValidator.js:96:9)\n    at Layer.handle [as handle_request] (/Users/macowner/Desktop/rental-agent/agent/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/macowner/Desktop/rental-agent/agent/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/macowner/Desktop/rental-agent/agent/node_modules/express/lib/router/route.js:119:3)","timestamp":"2025-08-23T14:38:32.464Z","url":"/agent","userAgent":"EchoapiRuntime/1.1.0","userId":"omsGXfLHi0AeE144E0uQXaNxsRoaftzPjq2TxaZyDLg","version":"1.0.0"}
{"action":"recordPayment","duration":11,"error":"Validation failed","level":"error","message":"Action recordPayment failed","service":"rental-contract-ao-agent","timestamp":"2025-08-23T14:40:26.646Z","version":"1.0.0","walletAddress":"omsGXfLHi0AeE144E0uQXaNxsRoaftzPjq2TxaZyDLg"}
{"body":{"action":"recordPayment","amount":1200,"leaseId":"07BD3448-8545-4909-9C82-6FAC697E9F9A","txHash":"0x123abc"},"error":"Validation failed","headers":{"accept":"*/*","accept-encoding":"gzip, deflate, br","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY3ZWZlNTAxOGU3NGJhYTJlN2U5MTRlZCIsInJvbGUiOiJhZG1pbiIsImlhdCI6MTc0Mzg3MjgyMCwiZXhwIjoxNzQzODc2NDIwfQ.1LnjG3ec3O_7fI35xpHXLV_HxMUpCPL58fU0PP-Xtz8","cache-control":"no-cache","connection":"keep-alive","content-length":"128","content-type":"application/json","host":"localhost:6000","user-agent":"EchoapiRuntime/1.1.0","x-sender-wallet":"omsGXfLHi0AeE144E0uQXaNxsRoaftzPjq2TxaZyDLg","x-sig":"432253d274da2353c366be1006a30b6a7500be87c1ab289d8e4b36777cf77db4","x-timestamp":"2025-08-23T14:22:28Z"},"ip":"::1","level":"error","message":"Error occurred","method":"POST","service":"rental-contract-ao-agent","stack":"ValidationError: Validation failed\n    at handleJoiValidationError (/Users/macowner/Desktop/rental-agent/agent/src/middleware/errorHandler.js:197:15)\n    at handleRecordPayment (/Users/macowner/Desktop/rental-agent/agent/src/handlers/messageHandler.js:187:15)\n    at /Users/macowner/Desktop/rental-agent/agent/src/handlers/messageHandler.js:50:32\n    at /Users/macowner/Desktop/rental-agent/agent/src/middleware/errorHandler.js:182:25\n    at Layer.handle [as handle_request] (/Users/macowner/Desktop/rental-agent/agent/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/macowner/Desktop/rental-agent/agent/node_modules/express/lib/router/route.js:149:13)\n    at signatureValidator (/Users/macowner/Desktop/rental-agent/agent/src/middleware/signatureValidator.js:96:9)\n    at Layer.handle [as handle_request] (/Users/macowner/Desktop/rental-agent/agent/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/macowner/Desktop/rental-agent/agent/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/macowner/Desktop/rental-agent/agent/node_modules/express/lib/router/route.js:119:3)","timestamp":"2025-08-23T14:40:26.655Z","url":"/agent","userAgent":"EchoapiRuntime/1.1.0","userId":"omsGXfLHi0AeE144E0uQXaNxsRoaftzPjq2TxaZyDLg","version":"1.0.0"}
{"action":"recordPayment","duration":3,"error":"Validation failed","level":"error","message":"Action recordPayment failed","service":"rental-contract-ao-agent","timestamp":"2025-08-23T14:41:41.804Z","version":"1.0.0","walletAddress":"omsGXfLHi0AeE144E0uQXaNxsRoaftzPjq2TxaZyDLg"}
{"body":{"action":"recordPayment","amount":1000,"currency":"USD","leaseId":"550e8400-e29b-41d4-a716-446655440000","txHash":"0xabc123fakehash"},"error":"Validation failed","headers":{"accept":"*/*","accept-encoding":"gzip, deflate, br","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY3ZWZlNTAxOGU3NGJhYTJlN2U5MTRlZCIsInJvbGUiOiJhZG1pbiIsImlhdCI6MTc0Mzg3MjgyMCwiZXhwIjoxNzQzODc2NDIwfQ.1LnjG3ec3O_7fI35xpHXLV_HxMUpCPL58fU0PP-Xtz8","cache-control":"no-cache","connection":"keep-alive","content-length":"155","content-type":"application/json","host":"localhost:6000","user-agent":"EchoapiRuntime/1.1.0","x-sender-wallet":"omsGXfLHi0AeE144E0uQXaNxsRoaftzPjq2TxaZyDLg","x-sig":"4d5224d73bd3aba6d361a49a49302a90b3f68235b783562823355375f34a4cb3","x-timestamp":"2025-08-23T14:22:28Z"},"ip":"::1","level":"error","message":"Error occurred","method":"POST","service":"rental-contract-ao-agent","stack":"ValidationError: Validation failed\n    at handleJoiValidationError (/Users/macowner/Desktop/rental-agent/agent/src/middleware/errorHandler.js:197:15)\n    at handleRecordPayment (/Users/macowner/Desktop/rental-agent/agent/src/handlers/messageHandler.js:187:15)\n    at /Users/macowner/Desktop/rental-agent/agent/src/handlers/messageHandler.js:50:32\n    at /Users/macowner/Desktop/rental-agent/agent/src/middleware/errorHandler.js:182:25\n    at Layer.handle [as handle_request] (/Users/macowner/Desktop/rental-agent/agent/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/macowner/Desktop/rental-agent/agent/node_modules/express/lib/router/route.js:149:13)\n    at signatureValidator (/Users/macowner/Desktop/rental-agent/agent/src/middleware/signatureValidator.js:96:9)\n    at Layer.handle [as handle_request] (/Users/macowner/Desktop/rental-agent/agent/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/macowner/Desktop/rental-agent/agent/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/macowner/Desktop/rental-agent/agent/node_modules/express/lib/router/route.js:119:3)","timestamp":"2025-08-23T14:41:41.804Z","url":"/agent","userAgent":"EchoapiRuntime/1.1.0","userId":"omsGXfLHi0AeE144E0uQXaNxsRoaftzPjq2TxaZyDLg","version":"1.0.0"}
{"action":"recordPayment","duration":1,"error":"Validation failed","level":"error","message":"Action recordPayment failed","service":"rental-contract-ao-agent","timestamp":"2025-08-23T14:42:35.803Z","version":"1.0.0","walletAddress":"omsGXfLHi0AeE144E0uQXaNxsRoaftzPjq2TxaZyDLg"}
{"body":{"action":"recordPayment","amount":1000,"currency":"USDC","leaseId":"550e8400-e29b-41d4-a716-446655440000","txHash":"0xabc123fakehash"},"error":"Validation failed","headers":{"accept":"*/*","accept-encoding":"gzip, deflate, br","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY3ZWZlNTAxOGU3NGJhYTJlN2U5MTRlZCIsInJvbGUiOiJhZG1pbiIsImlhdCI6MTc0Mzg3MjgyMCwiZXhwIjoxNzQzODc2NDIwfQ.1LnjG3ec3O_7fI35xpHXLV_HxMUpCPL58fU0PP-Xtz8","cache-control":"no-cache","connection":"keep-alive","content-length":"156","content-type":"application/json","host":"localhost:6000","user-agent":"EchoapiRuntime/1.1.0","x-sender-wallet":"omsGXfLHi0AeE144E0uQXaNxsRoaftzPjq2TxaZyDLg","x-sig":"a33245ec07edc2bb4b0a1bbe9f293f4a8dc9017687239dd9729c12ed98c1cda4","x-timestamp":"2025-08-23T14:22:28Z"},"ip":"::1","level":"error","message":"Error occurred","method":"POST","service":"rental-contract-ao-agent","stack":"ValidationError: Validation failed\n    at handleJoiValidationError (/Users/macowner/Desktop/rental-agent/agent/src/middleware/errorHandler.js:197:15)\n    at handleRecordPayment (/Users/macowner/Desktop/rental-agent/agent/src/handlers/messageHandler.js:187:15)\n    at /Users/macowner/Desktop/rental-agent/agent/src/handlers/messageHandler.js:50:32\n    at /Users/macowner/Desktop/rental-agent/agent/src/middleware/errorHandler.js:182:25\n    at Layer.handle [as handle_request] (/Users/macowner/Desktop/rental-agent/agent/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/macowner/Desktop/rental-agent/agent/node_modules/express/lib/router/route.js:149:13)\n    at signatureValidator (/Users/macowner/Desktop/rental-agent/agent/src/middleware/signatureValidator.js:96:9)\n    at Layer.handle [as handle_request] (/Users/macowner/Desktop/rental-agent/agent/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/macowner/Desktop/rental-agent/agent/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/macowner/Desktop/rental-agent/agent/node_modules/express/lib/router/route.js:119:3)","timestamp":"2025-08-23T14:42:35.804Z","url":"/agent","userAgent":"EchoapiRuntime/1.1.0","userId":"omsGXfLHi0AeE144E0uQXaNxsRoaftzPjq2TxaZyDLg","version":"1.0.0"}
{"action":"recordPayment","duration":2,"error":"Payment verification failed","level":"error","message":"Action recordPayment failed","service":"rental-contract-ao-agent","timestamp":"2025-08-23T14:44:00.739Z","version":"1.0.0","walletAddress":"omsGXfLHi0AeE144E0uQXaNxsRoaftzPjq2TxaZyDLg"}
{"body":{"action":"recordPayment","amount":1000,"chainId":"1","currency":"USDC","leaseId":"550e8400-e29b-41d4-a716-446655440000","txHash":"0xabc123fakehash"},"error":"Payment verification failed","headers":{"accept":"*/*","accept-encoding":"gzip, deflate, br","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY3ZWZlNTAxOGU3NGJhYTJlN2U5MTRlZCIsInJvbGUiOiJhZG1pbiIsImlhdCI6MTc0Mzg3MjgyMCwiZXhwIjoxNzQzODc2NDIwfQ.1LnjG3ec3O_7fI35xpHXLV_HxMUpCPL58fU0PP-Xtz8","cache-control":"no-cache","connection":"keep-alive","content-length":"174","content-type":"application/json","host":"localhost:6000","user-agent":"EchoapiRuntime/1.1.0","x-sender-wallet":"omsGXfLHi0AeE144E0uQXaNxsRoaftzPjq2TxaZyDLg","x-sig":"100b25cbd7ec0ac0dbd0905fcf08fb7d7f9aff8e213e6d137c10792bf22159ba","x-timestamp":"2025-08-23T14:22:28Z"},"ip":"::1","level":"error","message":"Error occurred","method":"POST","service":"rental-contract-ao-agent","stack":"ValidationError: Payment verification failed\n    at handleRecordPayment (/Users/macowner/Desktop/rental-agent/agent/src/handlers/messageHandler.js:195:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async /Users/macowner/Desktop/rental-agent/agent/src/handlers/messageHandler.js:50:26","timestamp":"2025-08-23T14:44:00.768Z","url":"/agent","userAgent":"EchoapiRuntime/1.1.0","userId":"omsGXfLHi0AeE144E0uQXaNxsRoaftzPjq2TxaZyDLg","version":"1.0.0"}
